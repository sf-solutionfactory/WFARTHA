@model WFARTHA.Models.Usuario

@{
    /**/

    //ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.pagina_r = 602;
    ViewBag.carpeta_r = 500;
}
<script type="text/javascript" src="~/Scripts/jquery.validate.min.js"></script>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

<div class="row">
    <div class="col s12 right-align">
        <button type="submit" id="btn_guardar" class="btn btn-default">Guardar</button>
    </div>
    <div class="row">
        <div class="col s12 left-align">
            @if (@ViewBag.mensaje != null)
            {
                @ViewBag.mensaje
            }
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <div class="card-panel">
                <div class="row">
                    <div class="form-group">
                        <div class=" dropdown col s12">
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <div class="input-field col s12">
                                @Html.EditorFor(model => model.ID, new { htmlAttributes = new { @aria_required = "true", @required = "required" } })
                                @Html.LabelFor(model => model.ID, htmlAttributes: new { @id = "lbl_id" })
                                <span class="helper-text" id="hlp_id" data-error="Id repetido" data-success="Correcto"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
        <div class="row">
        <div class="col s12 left-align">
            @if (@TempData["MensajeUsuario"] != null)
            {
            <label id="lbl_mensajeusuario"></label>
            }
        </div>
    </div>
    
    //OCG 11/10/18 Validacion de email
    <script>

        $('#EMAIL').on("focusout", function () {
            var email = $('#EMAIL').val();
            $('#EMAIL').removeClass("valid");
            $('#EMAIL').removeClass("invalid");
            if (validateEmail(email) == true) {
                $('#EMAIL').addClass("valid");
            }
            else {
                $('#EMAIL').addClass("invalid");
            }
        });

        function validateEmail(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@@"]+(\.[^<>()\[\]\\.,;:\s@@"]+)*)|(".+"))@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }
    </script>
}


@*<div>
    @Html.ActionLink("Back to List", "Index",null,new { id="lbl_regresar"})
</div>*@


@if (ViewBag.Error != null)
{
    @*<div class="row red-text">
            @ViewBag.Error
        </div>*@

    <script>
            M.toast({ html: '@ViewBag.Error', classes: 'red' });
    </script>
}